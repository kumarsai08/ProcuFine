<!--
* 
* @ Name    :   deliveryInformation
* @ Purpose :   This code includes columns for different fields.We have a combobox for selecting a product name and a search input for filtering orders by order ID.
*               The table contains a loop that iterates over a list of order items and displays the relevant information for each item in a row.Each row also includes a button for adding details to the order item.            
* @ Author  :   Manogna,Kumar Sai
*
*   Date            |  Developer Name                 |  Version      |  Changes
* ======================================================================================================
*   26-12-2022      |  manogna.koppula@absyz.com      |  1.0          |  Initial Version
*                      kumarsai.vadapalli@absyz.com
*
-->
<template>
    <lightning-card>
        <div class="slds-box slds-theme_default">
            <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_col-bordered">
                <thead>
                    <tr>
                        <th class="" scope="col">
                            <lightning-combobox
                            name="Product Name"
                            label="Product Name"
                            value={value}
                            options={list_ProductNameOptions}
                            onchange={handleProductChange} ></lightning-combobox>
                        </th>
                        <th><lightning-input type="search" onchange={handleKeyChange} class="slds-m-bottom_small" label="Order ID" value={searchKey}></lightning-input></th>
                        <th class="" scope="col">
                            <div class="slds-truncate" title="Total Quantity">Total Quantity</div>
                        </th>
                        <th class="" scope="col">
                            <div class="slds-truncate" title="Received Quantity">Received Quantity</div>
                        </th>
                        <th class="" scope="col">
                            <div class="slds-truncate" title="Pending Quantity">Pending Quantity</div>
                        </th>
                        <th class="" scope="col">
                            <div class="slds-truncate" title="Under QA">Under QA</div>
                        </th>
                        <th class="" scope="col">
                            <lightning-combobox
                            name="Status"
                            label="Status"
                            value={value}
                            options={orderOptions}
                            onchange={handleStatusChange} ></lightning-combobox>
                        </th>  
                    </tr>
                </thead>
                <tbody>
                    <template for:each={list_OrderItem} for:item="ord">
                        <tr key={ord.Id}>
                            <!-- <td>{ord.PF_Product__r.Name}</td> -->
                            <td><a name={ord.PF_Product__c} data-orderproducturl= {ord.PF_Product__c} onclick={navigateToProduct} target="_blank">{ord.PF_Product__r.Name}</a></td>
                            <td><a name={ord.Id} data-orderrecordurl= {ord.Id} onclick={handleOnClick} target="_blank">{ord.OrderNumber}</a></td>
                            <td>{ord.Quantity__c}</td>
                            <td><input type="number" class="pt-3-half" onchange={handleonchange} contenteditable="true" value={ord.Received_Quantity__c}></td> 
                            <td>{ord.PF_Pending_Quantity__c}</td>
                            <td>{ord.PF_Under_QA__c}</td>
                            <td>{ord.Status}</td>
                            <td>
                                <button  class="editbtn" onclick={handleSave} data-pend= {ord.PF_Pending_Quantity__c} data-suppliername={ord.Account.Name} data-proid={ord.PF_Product__c} data-proname={ord.PF_Product__r.Name} data-idname={ord.Id} data-recquantity= {quantityvalue}  >Add Details</button> 
                            </td>
                        </tr>
                    </template>
                    <template if:true={blnIsShowModal}>
                        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                        aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                        <div class="slds-modal__container">
                            <header class="slds-modal__header">
                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                title="Close" onclick={handleBack}>
                                <lightning-icon icon-name="utility:close" alternative-text="close" label="Select One Record"
                                variant="inverse" size="small" onclick={closeThePopup}></lightning-icon>
                                <span class="slds-assistive-text">Close</span>
                            </button>
                            <div>
                                <h2 id="modal-heading-06" class="slds-text-heading_medium slds-text-align_left">Products
                                </h2>
                            </div>
                        </header>
                        <div class="slds-modal__content slds-p-horizontal_xx-small " id="modal-content-id-5">
                            <lightning-card>
                                    <div>
                                       <lightning-input type="date" name="input1" onchange={handledeliverydate} label="Enter the delivery date" ></lightning-input>
                                   </div>
                                <table class="slds-table slds-table_cell-buffer slds-p-horizontal_xx-small" border="1"
                                cellspacing="0" cellpadding="0" bordercolor="#ccc" style="border-collapse:collapse;">
                                <thead>
                                    <tr class="slds-table-height_reset">
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Product Name">Product Name</div>
                                        </th>
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Supplier Name">Supplier Name</div>
                                        </th>
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Batch Number">SKU-Id</div>
                                        </th> 
                                    </tr>
                                </thead>
                                <tbody>
                                    <template for:each={list_Dat} for:item="con">
                                        <tr key={con}>
                                            <td>{strProductName}</td>
                                            <td>{StrSupplierName}</td>
                                            <td><lightning-input type="text" class="batchNo" required=true ></lightning-input></td>
                                            <!--<td> <lightning-button variant="Neutral" label="select" onclick={handleVerify}
                                                class="slds-m-left_x-large"></lightning-button>
                                            </td>-->
                                        </tr>
                                    </template>
                                </tbody>
                            </table>
                        </lightning-card>
                    </div>
                    <!-- modal footer start-->
                    <footer class="slds-modal__footer">
                        <lightning-button variant="success" label="Save" title="Successful action" onclick={hideModalBox} class="slds-m-left_x-small"></lightning-button>
                    </footer>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </template>
    </tbody>
</table>
</div> 
</lightning-card>
</template>